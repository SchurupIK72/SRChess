# API-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è MVP –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ¬´–®–∞—Ö–º–∞—Ç—ã —Å –æ—Å–æ–±—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏¬ª

## ‚úÖ –û–±—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è

- **–ë–∞–∑–æ–≤—ã–π URL REST**: `https://your-domain.com/api`
- **–ë–∞–∑–æ–≤—ã–π URL WebSocket**: `wss://your-domain.com/ws/match/{match_id}`
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: JWT (`Authorization: Bearer <token>`)

---

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### POST /auth/register
**–û–ø–∏—Å–∞–Ω–∏–µ**: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**:
```json
{
  "username": "newPlayer",
  "password": "secure123"
}
```
**–û—Ç–≤–µ—Ç 201**:
```json
{
  "access_token": "jwt_token_string",
  "token_type": "bearer"
}
```

### POST /auth/login
**–û–ø–∏—Å–∞–Ω–∏–µ**: –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É  
**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**:
```json
{
  "username": "newPlayer",
  "password": "secure123"
}
```
**–û—Ç–≤–µ—Ç 200**:
```json
{
  "access_token": "jwt_token_string",
  "token_type": "bearer"
}
```

---

## üéÆ –ú–∞—Ç—á–∏

### GET /matches
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–∞—Ç—á–µ–π  
**–û—Ç–≤–µ—Ç 200**:
```json
[
  {
    "id": "match123",
    "players": ["player1"],
    "status": "waiting",
    "rules": ["DoubleKnight"]
  }
]
```

### POST /matches
**–û–ø–∏—Å–∞–Ω–∏–µ**: —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É  
**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**:
```json
{
  "rules": ["XRay", "Blink"]
}
```
**–û—Ç–≤–µ—Ç 201**:
```json
{
  "id": "match123",
  "status": "waiting"
}
```

### GET /matches/{id}
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–∞—Ç—á–∞  
**–û—Ç–≤–µ—Ç 200**:
```json
{
  "id": "match123",
  "players": ["player1", "player2"],
  "board": [[...], [...]],
  "turn": "white",
  "history": ["e2e4", "e7e5"],
  "rules": ["XRay"]
}
```

---

## üßæ –ò—Å—Ç–æ—Ä–∏—è –ø–∞—Ä—Ç–∏–π

### GET /history
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –∏–≥—Ä —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
**–û—Ç–≤–µ—Ç 200**:
```json
[
  {
    "id": "match001",
    "opponent": "enemyMaster",
    "result": "win",
    "moves": ["e2e4", "e7e5", "..."]
  }
]
```

---

## üîÑ WebSocket: `wss://your-domain.com/ws/match/{match_id}`

### üí¨ –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –∫–ª–∏–µ–Ω—Ç–∞:

#### 1. move
```json
{
  "type": "move",
  "from": "e2",
  "to": "e4"
}
```

#### 2. chat
```json
{
  "type": "chat",
  "message": "Good luck!"
}
```

#### 3. resign
```json
{
  "type": "resign"
}
```

#### 4. rules_change
```json
{
  "type": "rules_change",
  "rules": ["XRay", "DoubleKnight"]
}
```

---

### üß† –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞

```json
{
  "type": "state",
  "board": [[...], [...]],
  "turn": "black",
  "history": ["e2e4", "e7e5"],
  "rules": ["XRay"],
  "status": "active",
  "players": ["whiteUser", "blackUser"]
}
```

---

## ‚ö†Ô∏è –û—à–∏–±–∫–∏

| –ö–æ–¥ | –ó–Ω–∞—á–µ–Ω–∏–µ            |
|-----|---------------------|
| 400 | –ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ     |
| 401 | –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω       |
| 403 | –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω     |
| 404 | –ú–∞—Ç—á –Ω–µ –Ω–∞–π–¥–µ–Ω      |
| 409 | –ö–æ–Ω—Ñ–ª–∏–∫—Ç (–∏–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å –∏ —Ç.–ø.) |
